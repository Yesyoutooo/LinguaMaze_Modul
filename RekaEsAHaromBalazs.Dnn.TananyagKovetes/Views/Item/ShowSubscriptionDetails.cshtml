@inherits DotNetNuke.Web.Mvc.Framework.DnnWebViewPage<IEnumerable<TananyagKovetesRekaEsAHaromBalazs.Dnn.TananyagKovetes.Models.Lessons>>

@using System.Text.RegularExpressions
@using DotNetNuke.Web.Mvc.Helpers
@using System.Linq
@using Dnn.Modules.Console



<div id="Items-@Dnn.ModuleContext.ModuleId">
    @if (Model != null)
    {
        foreach (var item in Model)
        {

            <div style="width: 75%;">
                <div style="float: left; width: 100%; background-color: #f3ebe3; ">
                    <div style="height: 150px; margin: auto; ">
                        <p>
                            @item.Name
                            <br />
                            Dátum: @item.DateTime.ToString("yyyy.MM.dd - HH:mm")
                            <br />
                            @if (item.Place)
                            {
                                <span>(Online)</span>
                            }
                            else
                            {
                                <span>(Személyes)</span>
                            }
                        </p>
                        <p>
                            Foglalás határideje: @item.DateTime.AddHours(-2).ToString("yyyy.MM.dd - HH:mm")<br>
                            Lemondás határideje: @item.DateTime.AddDays(-1).ToString("yyyy.MM.dd - HH:mm")
                        </p>
                        <p>Órára érvényes bérletek:</p>
                        <p>
                            @item.Type Szókincsfejlesztő <br>
                            @item.Type Nyelvtancentrikus<br>
                            @item.Type Beszédcentrikus <br/>
                        </p>
                        <p>Helyszín: LinguaMaze Nyelviskola - Budapest, Valami utca 25.</p>

                        <div style="float: left;">

                            <a class="btn" href="@Url.Action("Index", "Item")">Vissza az bérleteimhez</a>

                            @if (!(item.DateTime.AddHours(-2) <= DateTime.UtcNow))
                            {
                                <a class="btn" href="@Url.Action("CancelBooking", "Item", new {lessonID = item.ID
                                        ,activePassID = TempData["clickedPassID"]
                                                })">
                                    Leiratkozás erről az óráról
                                </a>
                            }
                        </div>
                    </div>
                </div>
            </div>

        }

    }

    @if (Model.Count() <= 0)
    {
        <p>@Dnn.LocalizeString("Úgy látszik még nincs foglalásod.")</p>
    }
</div>
